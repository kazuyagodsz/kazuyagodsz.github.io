!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("JS Ads for Publishers",[],t):"object"==typeof exports?exports["JS Ads for Publishers"]=t():e["JS Ads for Publishers"]=t()}(self,(function(){return function(){var e={808:function(e,t,i){var n,r;!function(s){if(void 0===(r="function"==typeof(n=s)?n.call(t,i,t,e):n)||(e.exports=r),!0,e.exports=s(),!!0){var o=window.Cookies,a=window.Cookies=s();a.noConflict=function(){return window.Cookies=o,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function i(n){function r(){}function s(t,i,s){if("undefined"!=typeof document){"number"==typeof(s=e({path:"/"},r.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var o=JSON.stringify(i);/^[\{\[]/.test(o)&&(i=o)}catch(e){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var l in s)s[l]&&(a+="; "+l,!0!==s[l]&&(a+="="+s[l].split(";")[0]));return document.cookie=t+"="+i+a}}function o(e,i){if("undefined"!=typeof document){for(var r={},s=document.cookie?document.cookie.split("; "):[],o=0;o<s.length;o++){var a=s[o].split("="),l=a.slice(1).join("=");i||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var d=t(a[0]);if(l=(n.read||n)(l,d)||t(l),i)try{l=JSON.parse(l)}catch(e){}if(r[d]=l,e===d)break}catch(e){}}return e?r[e]:r}}return r.set=s,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,i){s(t,"",e(i,{expires:-1}))},r.defaults={},r.withConverter=i,r}((function(){}))}))}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return function(){"use strict";var e,t,r,s;i.r(n),function(e){e.popunderTriggered="popunderTriggered",e.embeddedAdsLoaded="embeddedAdsLoaded",e.embeddedAdsError="embeddedAdsError",e.embeddedAdsSpotLoaded="embeddedAdsSpotLoaded",e.embeddedAdsSpotFailed="embeddedAdsSpotFailed",e.embeddedAdsSpotDefaultLoaded="embeddedAdsSpotDefaultLoaded",e.embeddedAdsDebuggerUpdate="embeddedAdsDebuggerUpdate"}(e||(e={})),function(e){e[e.Low=99]="Low",e[e.Medium=550]="Medium",e[e.High=720]="High",e[e.VeryHight=1080]="VeryHight"}(t||(t={})),function(e){e.site_id="site_id",e.hb_guid="hc",e.version="t_version",e.platform="device_type",e.client_ip="clientIP",e.segment="segment",e.custom_param="",e.delivery_server="",e.refresh_times="",e.refresh_delay="",e.retry="",e.bg_color="",e.default_image="",e.default_url="",e.domain_rewrite="",e.fail_url="",e.spot_ssp="",e.spot_new=""}(r||(r={})),function(e){e.context_pornstar="context_pornstar",e.context_category="context_category",e.context_tag="context_tag",e.context_page_type="context_page_type",e.info="info",e.category="category",e.search="search",e.site="site"}(s||(s={}));const o={adBaseURL:`${location.protocol}//{ENV}/{METHOD}`,adClassNameContext:"adsbytrafficjunkycontext",cookies:{deliveryServer:{name:"TJDeliveryServer"},env:{name:"TJAdsUrl"}},videoFormats:["video/mp4","video/webm","video/ogg"]};var a=i(808),l=i.n(a);class d{}d.getEnv=e=>{const t=a.get(o.cookies.env.name),i=".trafficjunky.net";return t?`${t}${i}`:e||`ads${i}`},d.getDeliveryServer=()=>a.get(o.cookies.deliveryServer.name);class c{createURL(e,t=!1){const i=e.specificParams.domain_rewrite;let n=o.adBaseURL;n=n.replace("{ENV}",d.getEnv(i)),n=n.replace("{METHOD}",this.getMethod(e,t)),t?(n+=`?zone_id=${e.spotId}&redirect=1&format=popunder`,n+=`&clientType=${encodeURIComponent(String(e.specificParams.platform))}`):(n+=`?data=${encodeURIComponent(`[{"spots":[{"zone":${e.spotId}}]}]`)}`,n+="&clientType=mobile"),n+=this.getChannelsParameters(e.channelParams),n+=this.getSpecificParameters(e.specificParams,t);const r=d.getDeliveryServer();return r&&(n+=`&delivery-server=${r}`),i&&(n+=`&dm=${encodeURIComponent(i)}`),n+=`&_=${Date.now()}`,e.specificParams.custom_param&&(n+=e.specificParams.custom_param),n}getSpecificParams(e,t){const i=Object.assign(Object.assign({},t),e),n={};for(const e in i)e in r&&(n[e]=i[e]);return n}getChannelParams(e,t){const i=Object.assign(Object.assign({},t),e),n={};for(const e in i)e in s&&(n[e]=i[e]);return n}getAdContextAttributes(){const e=document.querySelector(`meta[name="${o.adClassNameContext}"]`);return e?h.getDataAttributes(e):null}getChannelsParameters(e){let t="";if(!e)return t;for(const i in e)s[i]&&e[i]&&(t+=`&channel[${i}]=${encodeURIComponent(e[i])}`);return t}getSpecificParameters(e,t){let i="";for(const n in e){if(!r[n]||!e[n])continue;const s=this.getSpecificParameterValue(e,t,n);i+=`&${r[n]}=${encodeURIComponent(s)}`}return i}getSpecificParameterValue(e,t,i){return"platform"!==i||t||"pc"!==e[i]?e[i]:"tablet"}getMethod(e,t){return"true"===e.specificParams.spot_ssp?"deep-ssp":t?"ads":"ads_batch"}}class u{static log(t,i){u.logs[t]||(u.logs[t]=[]),i&&(i.logTime=new Date(Date.now())),u.logs[t].push(i);const n=JSON.parse(JSON.stringify(this.debug()));window.postMessage({debug:n,name:t,type:e.embeddedAdsDebuggerUpdate},"*")}static getSpots(){const t={};for(const i in u.logs){-1!==[e.embeddedAdsSpotDefaultLoaded,e.embeddedAdsSpotFailed,e.embeddedAdsSpotLoaded].indexOf(i)&&u.populateMapForEvent(i,t)}return u.populateSpots(t)}static populateSpots(t){const i={};for(const n in t){i[n]||(i[n]={});const r=t[n][e.embeddedAdsSpotFailed];this.populateSpotsPerRefreshed(i[n],r,"failed");const s=t[n][e.embeddedAdsSpotDefaultLoaded];this.populateSpotsPerRefreshed(i[n],s,"default_loaded");const o=t[n][e.embeddedAdsSpotLoaded];this.populateSpotsPerRefreshed(i[n],o,"loaded")}return this.formatSpots(i)}static formatSpots(e){const t={};for(const i in e){t[i]=[];for(const n in e[i])t[i].push(e[i][n])}return t}static populateMapForEvent(e,t){for(let i=0;i<u.logs[e].length;i++){const n=u.logs[e][i].ad;t[n.refreshed]||(t[n.refreshed]={}),t[n.refreshed][e]||(t[n.refreshed][e]={}),t[n.refreshed][e][n.uuid]={container:u.logs[e][i].container,spotId:n.spotId}}}static populateSpotsPerRefreshed(e,t,i){if(t)for(const n in t)e[n]={container:t[n].container,spotId:t[n].spotId,status:i}}static getHBSpots(){const e=document.querySelectorAll("script[src*='/ads_batch']");for(let t=0;t<e.length;t++){const i=String(e[t].getAttribute("src")),n=u.getHBSpotsFromScript(i);if(n)return n}return null}static getHBSpotsFromScript(e){try{if(!e||-1===e.indexOf("?"))return null;e=e.substring(e.indexOf("?"));const t=new URLSearchParams(e);if(!t.get("hb"))return null;const i=JSON.parse(t.get("data"))[0].spots,n=[];for(let e=0;e<i.length;e++)n.push(i[e].zone);return n}catch(e){return null}}}u.logs={},u.debug=()=>({context:u.adContextAttributes,events:u.logs,hbSpots:u.getHBSpots(),spots:u.getSpots(),version:"1.0.7"});class h{static connectionInfo(){return navigator.connection||navigator.mozConnection||navigator.webkitConnection}}h.createDOMElement=(e,t={})=>{const i=document.createElement(e);for(const e in t)i.setAttribute(e,t[e]);return i},h.getDataAttributes=e=>{var t,i;const n=[].filter.call(e.attributes,(e=>/^data-/.test(e.name))),r={};for(const e in n){const s=null===(t=n[e].name)||void 0===t?void 0:t.replace("data-","").replace(/-/g,"_"),o=null===(i=n[e].value)||void 0===i?void 0:i.trim();o&&s&&(r[s]=h.sanitize(o))}return r},h.isLeftButton=e=>1===(e.which||e.button),h.isAdBlock=()=>{const e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox";let t=!1;try{document.body.appendChild(e),t=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e)}catch(e){t=!0}return t||!window.tjEmbeddedAdsLoaded},h.dispatchTjEvent=(t,i)=>{const n=document.createEvent("Event");n.initEvent(t,!1,!0),i&&(n.detail=i),document.dispatchEvent(n),u.log(t,i),t===e.embeddedAdsSpotFailed&&h.sendFailEvent(i)},h.sendFailEvent=e=>{var t;const i=(new c).getAdContextAttributes();if(!i||!i.fail_url)return;if(0===e.status)return;const n=new XMLHttpRequest;n.open("POST",i.fail_url),n.send(JSON.stringify({pageUrl:window.location.href,retryCounter:e.retried,tjAdData:null!==(t=e.request.response)&&void 0!==t?t:"",tjAdRequestUrl:e.request.url,tjResponseCode:e.request.status,tjResponseTime:e.request.duration,tjZoneID:e.ad.spotId}))},h.getQuality=()=>{const e=h.connectionInfo();return e?e.downlink<.3?t.Low:e.downlink<.7?t.Medium:t.High:t.Medium},h.sanitize=e=>{const t={"<":"&lt;",">":"&gt;"};return e.replace(/[<>]/gi,(e=>t[e]))},h.getNearestAvailableQuality=(e,t)=>{const i=Number(t);let n=Object.keys(e);if(0===n.length)return null;n=n.filter((t=>"progressive"===e[t].delivery)),n=n.filter((t=>{const i=e[t];return!!i.type&&["video/mp4","video/webm","video/ogg"].includes(i.type)}));return n.sort(((e,t)=>{const n=Number(e),r=Number(t);return isNaN(n)?1:isNaN(r)?-1:Math.abs(i-n)-Math.abs(i-r)}))[0]};var p=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class m{static dispatchError(t){m.dispatch(e.embeddedAdsError,null,{error:JSON.stringify(t,Object.getOwnPropertyNames(t))})}static sendEvent(e){if(!e)return;const t=new XMLHttpRequest;t.open("GET",e),t.send()}}m.calculateHeightRatio=e=>m.getClientWidth()*e/580,m.calculateWidthRatio=e=>m.getClientWidth()*e,m.createInlineStyle=(e,t=!1)=>{let i="";for(const t in e){let n="";";"!==e[t].substr(e[t].length-1)&&(n=";"),i+=`${t}:${e[t]}${n}`}return t&&(i=i.replace(/!important/g,"").replace(/;/g,"!important;")),i},m.getElementByTag=(e,t)=>e.tagName===t.toUpperCase()?e:e.querySelector(t),m.getElementBySpotId=(e,t)=>p(void 0,void 0,void 0,(function*(){const i=`.${e}[data-source-id="${t}"], .${e}[data-spot-id="${t}"]`;let n=0;for(;!document.querySelector(i);){if(n++>20)return null;yield new Promise((e=>requestAnimationFrame(e)))}return document.querySelector(i)})),m.dispatch=(e,t=null,i={})=>{h.dispatchTjEvent(e,m.getEventParams(t,i))},m.getEventParams=(e=null,t={})=>(e&&(t=Object.assign({ad:Object.assign({},e.params),channelParams:e.channelParams,container:e.containerElement,request:Object.assign(Object.assign({},e.request),{duration:Date.now()-Number(e.request.duration)}),specificParams:e.specificParams},t)),t),m.getUUID=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),m.getClientWidth=()=>document.documentElement.clientWidth,m.getWindowYPosition=()=>{let e=0;return pageYOffset?e=pageYOffset:document.documentElement.clientHeight?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e},m.getBrowserInfo=()=>{var e;let t=null,i=0;if(navigator.userAgent.search("YaBrowser/")>=0||navigator.userAgent.indexOf("Yowser/")>=0)t="YANDEX";else if(navigator.userAgent.search("Vivaldi/")>=0)t="VIVALDI";else if(navigator.userAgent.search("SamsungBrowser/")>=0||navigator.userAgent.toLowerCase().search("samsung")>=0)t="SAMSUNG BROWSER";else if(navigator.userAgent.search("Opera")>=0||navigator.userAgent.indexOf(" OPR/")>=0)t="OPERA";else if(navigator.userAgent.search("Edge/")>=0||navigator.userAgent.indexOf("Edg/")>=0||navigator.userAgent.search("EdgA/")>=0||navigator.userAgent.search("EdgiOS/")>=0)t="EDGE";else if(navigator.userAgent.search("MSIE")>=0)t="IE";else if(navigator.userAgent.search("Chrome")>=0||navigator.userAgent.search("CriOS/")>=0)t="CHROME";else if(navigator.userAgent.search("Firefox")>=0){const e=navigator.userAgent.match(/Firefox\/([0-9]+)\./);i=e?parseInt(e[1]):0,t="FIREFOX"}else navigator.userAgent.search("Safari")>=0&&-1===navigator.userAgent.search("Chrome")&&(t="SAFARI");return{mobileDevice:null===(e=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].find((e=>{if(navigator.userAgent.match(e))return e})))||void 0===e?void 0:e.source,name:t,version:i}};const v={adClassName:"adsbytrafficjunky",bottomAdName:"tjBottomAd",closeImageURL:`${location.protocol}//static.trafficjunky.com/delivery/img/close.png`,cookies:{bottom:{expiry:48e4,name:"TJBottomClose"},fail:{name:"TJAdsFail"},server:{expiry:36e5,name:"RLBNSERVERID"}},defaults:{bg_color:"transparent",platform:"mobile"},idSync:{scriptUrl:"https://static.trafficjunky.com/invocation/idsync/production/idsync.min.js",sites:["tube8","pornhub","youporn","redtube","xtube"]},inBanLabels:{defaultTargetUrl:"https://www.pornhub.com/information/advertising",filter:{availableWebsites:["pornhub"],websites:["pornhub","redtube","tube8","youporn"],zoneIds:[2190761]},targetUrls:{pornhub:"/information/advertising",redtube:"/information#advertising",tube8:"/info.html#advertising",youporn:"/information/#advertise"}},videoDriveBy:{cookieExpiry:288e5,cookieName:"videoDriveBy",position:"bottom",skipDelay:5e3,vastProvider:"tj"},viewabilityOn:!0};class g{static createURL(e,t=!1){return g.adService.createURL(e,t)}static getSpecificParams(e,t){return g.adService.getSpecificParams(e,t)}static getChannelParams(e,t){return g.adService.getChannelParams(e,t)}static getAdContextAttributes(){const e=g.adService.getAdContextAttributes();return u.adContextAttributes=e,e}}g.adService=new c;const f={"background-color":"#000000",border:"none",display:"block",margin:"0 auto",overflow:"hidden"},b={border:"none",display:"block",height:"100%",left:"0","margin-left":"auto","margin-right":"auto",position:"absolute",right:"0",top:"0","vertical-align":"middle",width:"100%"},w={overflow:"hidden",position:"relative"},y={background:"transparent",margin:"0 auto",overflow:"hidden",position:"relative","z-index":"9"},A={"background-color":"black",color:"#fff",display:"block","font-size":"12px","line-height":"1",padding:"5px 0 5px 0",position:"absolute","text-align":"center",width:"100%","z-index":"1"},C={"align-items":"center",display:"flex",height:"100%","transform-style":"preserve-3d",width:"100%"},x={height:"100vh",left:"0",position:"fixed",right:"0",width:"100%"},E=e=>{const t="Android"===e.mobileDevice&&"FIREFOX"===e.name||("iPhone"===e.mobileDevice||"iPad"===e.mobileDevice)&&("SAFARI"===e.name||"CHROME"===e.name)?{top:"0"}:{bottom:"0"};return Object.assign(Object.assign({},x),t)},S={bottom:"0",left:"0",position:"absolute",top:"0",width:"100%"},j=e=>{const t="iPhone"===e.mobileDevice||"iPad"===e.mobileDevice||"SAFARI"===e.name?{"clip-path":"inset(0 0)"}:{clip:"rect(0px, auto, auto, 0px)"};return Object.assign(Object.assign({},S),t)},N={"-ms-transform":"translateX(-50%)",bottom:"0px",display:"block",left:"50%",position:"fixed",transform:"translateX(-50%)","z-index":"9999"},M={background:`url(${v.closeImageURL})`,"background-repeat":"no-repeat",cursor:"pointer",height:"20px",position:"absolute",right:"-10px",top:"-10px",width:"20px"},k={overflow:"hidden",position:"relative"},T={left:"0",position:"absolute",top:"0",width:"100%"},D={display:"block",height:"15px",position:"fixed",right:"0",top:"0",width:"15px"},I={"background-image":'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsSAAALEgHS3X78AAACeElEQVRIiWPUmrv5P8MAABZ8VhZpKKDw+248oJoL8VqcbKVDM4uZqGbSULEYb1CTA8x5uRkMRAUYvvz6w7DrxRuG13/+Em9xtIw4g7u6PIb4ImcznE5Zd+UuAzcrC0OVmylcLPjFe4b0XSewWo7VYnEeTgZjeTEMcWxiMDD11FWGclsDFDF1CUEGNwkRhqVPXmKop1oc3/v+g0FakAdDHOQJbIBqFlsLCzCcfYjps6NPX2NVjzWotzx8znDx1XuGSQG2KOJ5Gw7jtPjx9x8MR09cZmgER4k4w9P3XxjWXrrDcPLzV+ItvvX9Jxijg73vPuK0GATUONkZdt1+zFB/4jKDEicHgyQXB061VM1OspwcDK3elnD+2YevGDa8fItV7cgruUiyWJSFmT4Wf/n5G4UfJCdBNcfgtfjg7Sco/DwHQ4Z0JWlw6gWVyfX6qgxbwl3AbFIB3lS9884TBm8dRQzL89DUTfKzYcjbdIR6Pgbl21VnbxI0hIedFWw5FwnBTjBxNV68TdByUFpo33OG4RuOKhAbIKoAAVl+5PErBncVGQZ7VRmwD0Hg6fuvDEfvPWFYfusRuKRDb6NRbDEDNNj3nvrIwHDqKlZ5UOr20ERNDxeevsJpHskFCCglo6dikKUz3SwYpAVRxXHVTAykltVdZtrgVB5mrM5w88V7hotPXzEoiwhibSCAymlcNRNJFsMshQFQ6wKEsQFQYms5dhGveURb/PXnL6LUgRJc7Z5TWKtVsiwGpeyLL94xZFnpYcQlA9SXK8/eZFh85zHOliUyIKvvBEpcKvw84PbU11+/Ge58+EKwkYAOyGoIgBINvoRDEDAwMAAA8jPdWcn5JXoAAAAASUVORK5CYII=")',"background-position":"-15px 0","background-size":"cover","box-shadow":"0 0 3px #333",cursor:"pointer",height:"15px",position:"absolute",right:"0",top:"0",width:"15px"},O={background:"#299cb2",color:"#fff",display:"block","font-family":"sans-serif","font-size":"10px",height:"15px","line-height":"15px",padding:"0",position:"absolute","text-align":"center",top:"0",transition:"left 1s",width:"100px","z-index":"-1"};class P{}P.fixSrcDoc=e=>{var t,i,n;if("srcdoc"in document.createElement("iframe"))return;if("IFRAME"!==e.tagName&&(e=e.querySelector("iframe")),!e)return;const r=e,s=null==r?void 0:r.getAttribute("srcdoc");s&&(null===(t=r.contentWindow)||void 0===t||t.document.open(),null===(i=r.contentWindow)||void 0===i||i.document.write(s),null===(n=r.contentWindow)||void 0===n||n.document.close())},P.fixMobileVideoAd=e=>{if(!e)return e;const t=e.indexOf('<div class="adtool_video_ad"');return-1!==t&&(e=`${e.substr(0,t)}\n\t\t\t<script src='//cdn11.contentabc.com/delivery/mobile_video/adtool_mobile_video_player_min.js'><\/script>\n\t\t\t${e.substr(t)}`),e};var L=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class _ extends class{constructor(e,t){this.channelParams={},this.specificParams={},this.request={},this.setChannelAndSpecificParams=(e,t)=>{this.specificParams=g.getSpecificParams(e,t),this.channelParams=g.getChannelParams(e,t);for(const e in v.defaults)this.specificParams[e]||(this.specificParams[e]=v.defaults[e])},this.params=this.getParams(e),this.setChannelAndSpecificParams(e,t)}getParams(e){return{height:String(e.height),inbanlabel:!!e.inbanlabel||null,refreshed:0,spotId:Number(e.source_id||e.spot_id),type:String(e.type),uuid:m.getUUID(),width:String(e.width),windowHeight:e.window_height,windowWidth:e.window_width}}}{constructor(t,i,n){super(i,n),this.createWithDefaultIfFail=(t,i)=>L(this,void 0,void 0,(function*(){const n=Number(this.specificParams.retry)||0;this.request.defaultAd=!1;for(let i=0;i<n+1;i++){const n=yield t();if(n)return n;m.dispatch(e.embeddedAdsSpotFailed,this,{retried:i})}return this.createDefaultAd(i)})),this.createDefaultAd=e=>{if(!this.specificParams.default_image||!this.specificParams.default_url)return null;(e=e||Object.assign({height:this.params.height,width:this.params.width},f))["background-color"]=this.specificParams.bg_color;const t=h.createDOMElement("img",{src:this.specificParams.default_image,style:m.createInlineStyle(e)}),i=h.createDOMElement("a",{"data-embeddedadsfallback":"true","data-height":this.params.height,"data-spot-id":this.params.spotId,"data-width":this.params.width,href:this.specificParams.default_url,target:"_blank"});return i.appendChild(t),this.request.defaultAd=!0,i},this.containerElement=t,this.refresh()}refresh(){const e=Number(this.specificParams.refresh_delay),t=Number(this.specificParams.refresh_times);if(!e||!t)return;let i=0;this.interval=window.setInterval((()=>{++i>=t&&window.clearInterval(this.interval),this.params.refreshed++,"function"==typeof this.revert&&this.revert(),this.run()}),1e3*e)}reload(){window.clearInterval(this.interval),"function"==typeof this.revert&&this.revert(),this.run(),this.refresh()}run(){return L(this,void 0,void 0,(function*(){if(!this.checkIfCreatable())return!1;this.request.duration=Date.now();const t=yield this.create();if(!t||!document.body.contains(this.containerElement))return"function"==typeof this.revert&&this.revert(),!1;this.insertIntoDOM(t),this.removeInvocationCode(),this.containerElement=t,P.fixSrcDoc(t);const i=this.request.defaultAd?e.embeddedAdsSpotDefaultLoaded:e.embeddedAdsSpotLoaded;return m.dispatch(i,this),!0}))}checkIfCreatable(){return!(!this.containerElement||!this.containerElement.parentNode)&&document.body.contains(this.containerElement)}insertIntoDOM(e){this.containerElement&&this.containerElement.parentNode&&this.containerElement.parentNode.insertBefore(e,this.containerElement.nextSibling)}removeInvocationCode(){this.containerElement&&this.containerElement.parentNode&&this.containerElement.parentNode.removeChild(this.containerElement)}}class B{static wasClosed(){return Boolean(a.get(v.cookies.bottom.name))}static isTestFail(){return Boolean(a.get(v.cookies.fail.name))}static close(){const e=new Date(Date.now()+v.cookies.bottom.expiry);a.set(v.cookies.bottom.name,"1",{expires:e,secure:!0})}}B.setDeliveryServer=e=>{if(!e)return;const t=new Date(Date.now()+v.cookies.server.expiry);a.set(v.cookies.server.name,e,{expires:t,secure:!0})};class F{static getHBAd(e){const t=window.tjPreloadAds[e.params.spotId],i=B.isTestFail()?null:t.response;return e.request.duration=Date.now()-Number(t.duration),e.request.url=t.url,e.request.status=t.status,e.request.response=t.response,delete window.tjPreloadAds[e.params.spotId],(new Fe).load(),new Promise((e=>e(i)))}static verifyResponse(e,t,i){return t.request.url=i,t.request.status=e.status,t.request.response=e.responseText,!window.XDomainRequest&&200!==e.status||!e.responseText||B.isTestFail()?null:e.responseText}}F.makeRequest=e=>window.tjPreloadAds&&window.tjPreloadAds[e.params.spotId]?F.getHBAd(e):new Promise((t=>{const i=window.XDomainRequest?new window.XDomainRequest:new XMLHttpRequest,n=g.createURL({channelParams:e.channelParams,specificParams:e.specificParams,spotId:e.params.spotId});i.onload=i.onerror=i.ontimeout=()=>{t(F.verifyResponse(i,e,n))},i.open("GET",n),i.timeout=1e4,i.send()})),F.makeXMLRequest=e=>new Promise((t=>{const i=window.XDomainRequest?new window.XDomainRequest:new XMLHttpRequest;i.onload=i.onerror=i.ontimeout=()=>{t(200===i.status?i.responseText:null)},i.open("GET",e),i.timeout=1e4,i.send()}));const R=Object.freeze({debugMode:!0,videoViewedTimeThreshold:2e3,viewedSizeThreshold:.5,viewedTimeThreshold:1e3});class z{static getElementId(e){if(e.id)return e.setAttribute("data-avm-id",e.id),e.id;if(null!==e.getAttribute("data-avm-id"))return e.getAttribute("data-avm-id");let t=Math.random().toString(36).substring(7);return t=`${e.tagName}-${t}`,e.setAttribute("data-avm-id",t),t}static getConfig(){return R}}class V{constructor(){this.config=z.getConfig()}}class U{constructor(e,t,i,n){this.timer={elapsedTime:0,startTime:0},this.locked=!1,this.element=e,this.url=t,this.config=z.getConfig(),this.id=z.getElementId(e),this.isVideo=n,this.params=i}sendAdsViewedEvent(e){const t=`${e}?${this.getUrlParams()}`,i=h.createDOMElement("iframe",{src:t,style:"display: none"});document.body.appendChild(i),this.unObserve()}sendEvent(){this.locked?this.unObserve():this.url&&(this.sendAdsViewedEvent(this.url),this.locked=!0)}getUrlParams(){const e=Object.assign({action:"ad_view"},this.params);return Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&")}}class W extends U{constructor(e,t,i,n,r){super(e,t,i,n),this.isIntersecting=!1,this.onUnobserve=r,this.viewedThreshold=this.isVideo?this.config.videoViewedTimeThreshold:this.config.viewedTimeThreshold}unObserve(){var e;null===(e=this.onUnobserve)||void 0===e||e.call(this,this.id)}onIntersectingChanged(e,t){!this.isIntersecting&&e?this.monitor(this.viewedThreshold-this.timer.elapsedTime):this.isIntersecting&&!e&&(this.timer.elapsedTime+=t-this.timer.startTime),this.timer.startTime=t,this.isIntersecting=e}monitor(e){setTimeout((()=>{this.isIntersecting&&this.sendEvent()}),e)}}class Y extends V{constructor(){super(),this.register=(e,t,i,n=!1)=>{if(!t)return;const r=z.getElementId(e);if(!this.adObservers.has(r)){e.setAttribute("avm-id",r);const s=new W(e,t,i,n,(()=>{this.observer.unobserve(e),this.adObservers.delete(r)}));this.adObservers.set(r,s),this.observer.observe(e)}},this.onAdsIntersected=e=>{e.forEach((e=>{const t=e.target.getAttribute("avm-id"),i=t?this.adObservers.get(t):null;null==i||i.onIntersectingChanged(e.isIntersecting,e.time)}))},this.observer=new IntersectionObserver(this.onAdsIntersected,{threshold:this.config.viewedSizeThreshold}),this.adObservers=new Map}}var q;!function(e){e[e.IN_VIEW=0]="IN_VIEW",e[e.ABOVE_VIEW=1]="ABOVE_VIEW",e[e.BELOW_VIEW=2]="BELOW_VIEW",e[e.TOP_BOTTOM_TRUNCATED=3]="TOP_BOTTOM_TRUNCATED",e[e.TOP_TRUNCATED=4]="TOP_TRUNCATED",e[e.BOTTOM_TRUNCATED=5]="BOTTOM_TRUNCATED",e[e.NOT_IN_VIEW=6]="NOT_IN_VIEW"}(q||(q={}));class $ extends U{constructor(e,t,i,n,r){super(e,t,i,n),this.check=()=>{const e=this.determineVisibility(this.element);this.isViewing(e)?(0===this.timer.elapsedTime&&-1===this.timer.startTime&&(this.timer.startTime=Date.now()),this.timer.elapsedTime=Date.now()-this.timer.startTime):(this.timer.elapsedTime=0,this.timer.startTime=-1),this.timer.elapsedTime>this.viewedThreshold&&this.sendEvent()},this.viewedThreshold=this.isVideo?this.config.videoViewedTimeThreshold:this.config.viewedTimeThreshold,this.onUnobserve=r}unObserve(){var e;null===(e=this.onUnobserve)||void 0===e||e.call(this,this.id)}isViewing(e){return[q.TOP_TRUNCATED,q.BOTTOM_TRUNCATED].includes(e.state)?e.value<=-this.config.viewedSizeThreshold:e.state===q.IN_VIEW&&e.value>=this.config.viewedSizeThreshold}determineVisibility(e){const t=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom,n=t-i;return t>=0&&i<=window.innerHeight?{state:q.IN_VIEW,value:1}:t<0&&i<=window.innerHeight?{state:q.TOP_TRUNCATED,value:i/n}:t>=0&&i>window.innerHeight?{state:q.BOTTOM_TRUNCATED,value:(window.innerHeight-t)/n}:{state:q.NOT_IN_VIEW,value:0}}}class J extends V{constructor(){super(),this.interval=null,this.monitor=()=>{this.observers.forEach((e=>{e.check()}))},this.removeObserver=e=>{this.observers.delete(e),0===this.observers.size&&null!==this.interval&&(window.clearInterval(this.interval),this.interval=null)},this.startMonitoring=()=>{null===this.interval&&(this.interval=window.setInterval(this.monitor,89))},this.observers=new Map}register(e,t,i,n){if(!t)return;const r=z.getElementId(e);this.observers.has(r)||(this.observers.set(r,new $(e,t,i,n,(()=>{this.removeObserver(r)}))),this.startMonitoring())}}class H{static getInstance(){return H.instance||(H.instance="IntersectionObserver"in window?new Y:new J),H.instance}}var Q=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class G{static create(e,t,i,n=!0){return Q(this,void 0,void 0,(function*(){let r=i;return r||(r=yield G.getJSONFromContent(e)),G.createSync(e,t,r,n)}))}static createSync(e,t,i,n=!0){const r=G.createIframe(e,t);return G.inject(r,e,i,n)}static inject(e,t,i,n=!0){const r=i;if(!r)return null;const s=G.getHTMLFromJSON(r);return s?(t.request.data=r,e.setAttribute("srcdoc",s),n&&this.attachViewabilityListener(e,r,t),e):null}static attachViewabilityListener(e,t,i){var n,r;const s=Object.assign({},t);s.viewEventUrl=(null===(n=i.specificParams)||void 0===n?void 0:n.domain_rewrite)?`https://${i.specificParams.domain_rewrite}/fla/log`:"https://ads.trafficjunky.net/fla/log",v.viewabilityOn&&H.getInstance().register(e,s.viewEventUrl,{ad_id:null==s?void 0:s.ad_id,campaign_id:null==s?void 0:s.campaign_id,initial_zone_id:null===(r=i.params)||void 0===r?void 0:r.spotId,member_id:null==s?void 0:s.member_id,zone_id:null==s?void 0:s.zone_id})}}G.wrap=(e,t,i)=>{const n=G.createIframe(e,i);return n.setAttribute("srcdoc",t.outerHTML),n},G.createIframe=(e,t)=>{(t=t||Object.assign({},f))["background-color"]=e.specificParams.bg_color;return h.createDOMElement("iframe",{allowtransparency:"true","data-embeddedads":"true","data-spot-id":e.params.spotId,height:e.params.height,marginheight:"0",marginwidth:"0",scrolling:"no",style:m.createInlineStyle(t,!0),width:e.params.width})},G.getJSONFromContent=e=>Q(void 0,void 0,void 0,(function*(){const t=yield F.makeRequest(e);if(!t)return null;try{return JSON.parse(t)[0]}catch(e){return null}})),G.getHTMLFromJSON=e=>{let t="";return e.full_html?t=e.full_html:e.html&&(t=e.html),P.fixMobileVideoAd(t)};class X{constructor(e,t){this.lastPlayPos=0,this.currentPlayPos=0,this.bufferingDetected=!1,this.video="VIDEO"===e.tagName?e:e.firstChild,this.mediaFiles=t,this.setQuality(h.getQuality()),Object.keys(this.mediaFiles).length>1&&setInterval(this.checkBuffering,50)}checkBuffering(){if(!this.video)return;this.currentPlayPos=this.video.currentTime;this.isBuffering(.03)&&(this.bufferingDetected=!0),this.isBuffering(.03,!0)&&(this.bufferingDetected=!1),this.lastPlayPos=this.currentPlayPos}isBuffering(e,t=!1){return!!this.video.paused&&(t?this.bufferingDetected&&this.currentPlayPos>this.lastPlayPos+e:!this.bufferingDetected&&this.currentPlayPos<this.lastPlayPos+e)}setQuality(e){let t=this.mediaFiles[e];if(!t){const i=h.getNearestAvailableQuality(this.mediaFiles,e);if(!i)return;t=this.mediaFiles[i]}t&&(this.video.src=t.url)}}class Z{}var K;Z.skipButton=(e,t)=>m.createInlineStyle({"align-items":"center","background-color":"rgba(0, 0, 0, 0.5)",color:"white",cursor:"default",display:"flex","font-family":"sans-serif","font-size":"14px","font-weight":"normal",height:`${e}`,"justify-content":"center","min-width":`${t}`,padding:"0 10px 0",position:"absolute",right:"0","text-align":"center",top:"0",transition:"opacity .3s","user-select":"none"}),Z.video=m.createInlineStyle({height:"100%",position:"absolute",right:"0"}),Z.expandButton=m.createInlineStyle({"background-color":"rgba(0, 0, 0, 0.3)",bottom:"0",cursor:"pointer",display:"none",height:"20px",padding:"8px",position:"absolute",width:"20px"}),Z.wrapper=m.createInlineStyle({"background-color":"#e91e62",height:"100%"}),Z.adBanner=m.createInlineStyle({float:"right",height:"100%",position:"relative"}),Z.adBannerImg=(e,t,i)=>m.createInlineStyle({"background-image":`url('${e}')`,"background-repeat":"no-repeat","background-size":"contain",height:`${t}px`,position:"absolute",right:"0",top:"0",width:`${i}px`}),Z.adContainer=(e,t)=>{const i={"background-color":"#3b3b3b",height:"240px",left:`${e+2}px`,position:"fixed",width:"426px","z-index":"99"};return window.innerWidth<430&&(i.height="180px",i.width="320px"),"top"===t?i.top="20px":i.bottom="20px",m.createInlineStyle(i)},function(e){e.AdaptiveVideo="adaptive_video",e.Video="video",e.Iframe="iframe",e.Image="image",e.VideoBanner="video_banner",e.Static="static",e.PrerollVideo="preroll_video",e.Native="native"}(K||(K={}));class ee{constructor(e){this.registerEvents=(e,t)=>{this.events.push({callback:t,time:e}),this.events.sort(((e,t)=>e.time>t.time?1:e.time<t.time?-1:0))},this.registerFirstQuartile=e=>(this.registerEvents(.25,e),this),this.registerMidpoint=e=>(this.registerEvents(.5,e),this),this.registerThirdQuartile=e=>(this.registerEvents(.75,e),this),this.startListening=()=>{this.video.addEventListener("timeupdate",(()=>{if(this.events.length<=0)return;const e=this.video.currentTime/this.video.duration,t=this.events[0];e>t.time&&(t.callback(),this.events.shift())}))},this.video=e,this.events=[]}}var te=null!==l()&&void 0!==l()?l():class{static set(e,t,i){const n=[`${e}=${null!=t?t:""}`];if(null==i?void 0:i.expires){const e=i.expires instanceof Date?i.expires.getTime()-(new Date).getTime():i.expires;n.push("; max-age="+e/1e3)}(null==i?void 0:i.secure)&&n.push("; secure"),document.cookie=n.join("")}static get(e){const t=`${e}=`;if(document.cookie.length>0){let e=document.cookie.indexOf(t);if(-1!==e){e+=t.length;const i=document.cookie.indexOf(";",e);return document.cookie.substring(e,-1===i?document.cookie.length:i)}}return null}};const ie={cancelAnimationFrame:()=>{},requestAnimationFrame:()=>0};if(window){const e=["ms","moz","webkit","o"],t=window;ie.requestAnimationFrame=e.map((e=>t[`${e}RequestAnimationFrame`])).reduce(((e,t)=>e||t),window.requestAnimationFrame),ie.cancelAnimationFrame=e.map((e=>t[`${e}CancelAnimationFrame`]||t[`${e}CancelRequestAnimationFrame`])).reduce(((e,t)=>e||t),window.cancelAnimationFrame)}if(!ie.requestAnimationFrame){let e=0;ie.requestAnimationFrame=t=>{const i=(new Date).getTime(),n=Math.max(0,16-(i-e)),r=window.setTimeout((()=>{t(i+n)}),n);return e=i+n,r},ie.cancelAnimationFrame||(ie.cancelAnimationFrame=e=>clearTimeout(e))}const ne=ie.requestAnimationFrame;ie.cancelAnimationFrame;class re{getValue(e,t,i=null){let n=null;const r=e.querySelectorAll(t);for(let e=0;e<r.length;e++){const t=r[e],s=this.strip(t.textContent);if(s&&(!i||i&&s!==i)){n=s;break}}return n}strip(e){return e?e.replace("<![CDATA[","").replace("]]>","").trim():null}}var se;!function(e){e.Start="start",e.FirstQuartile="firstQuartile",e.Midpoint="midpoint",e.ThirdQuartile="thirdQuartile",e.Complete="complete",e.Mute="mute",e.Unmute="unmute",e.Pause="pause",e.Resume="resume",e.Fullscreen="fullscreen",e.Skip="skip",e.Click="click",e.Impression="impression"}(se||(se={}));class oe extends re{get(e){const t={},i=e.querySelectorAll("TrackingEvents Tracking");for(let e=0;e<i.length;e++){const n=i[e],r=n.getAttribute("event"),s=n,o=this.strip(s.textContent);this.addEventUrl(t,r,o)}return 0!==Object.keys(t).length?t:null}addEventUrl(e,t,i){t&&i&&se[t.charAt(0).toUpperCase()+t.slice(1)]&&(e[t]||(e[t]=[]),e[t].push(i))}}class ae extends re{get(e){if(!(e=e.querySelectorAll("VideoClicks")[0]))return null;const t=this.getValue(e,"VideoClicks ClickThrough");if(!t)return null;const i=[],n=e.querySelectorAll("VideoClicks ClickTracking");for(let e=0;e<n.length;e++){const t=n[e],r=this.strip(t.textContent);r&&i.push(r)}return{clickThrough:t,clickTracking:i}}}class le extends re{get(e){const t={},i=e.querySelectorAll("MediaFiles MediaFile");for(let e=0;e<i.length;e++){const n=i[e],r=n,s=this.strip(r.textContent),a=Number(n.getAttribute("height")),l=n.getAttribute("type"),d=l&&o.videoFormats.includes(l);s&&d&&(t[a]={bitrate:Number(n.getAttribute("bitrate")),delivery:n.getAttribute("delivery"),height:a,type:l,url:s,width:Number(n.getAttribute("width"))})}return t}}class de extends re{constructor(){super(...arguments),this.getWithVideoClicksEvents=e=>{e.events||(e.events={});let t=e.events[se.Click]||[];return t=[...t,...e.videoClicks.clickTracking],e.events[se.Click]=t,e}}get(e){const t=[],i=e.querySelectorAll("Creatives Creative");for(let e=0;e<i.length;e++){let n=i[e];const r=n.getAttribute("AdID");if(n=n.querySelectorAll("Linear")[0],!n)continue;const s=this.getCreative(n,r);s&&t.push(this.getWithVideoClicksEvents(s))}return t.length?t:null}getCompanion(e){if(!e.querySelector("Creatives Creative CompanionAds Companion"))return null;const t=this.getValue(e,"StaticResource");return t?{clickThrough:this.getValue(e,"CompanionClickThrough"),clickTracking:this.getValue(e,"CompanionClickTracking"),staticResource:t}:null}getCreative(e,t){const i=(new ae).get(e),n=(new le).get(e);return i&&Object.keys(n).length?{duration:this.getValue(e,"Duration"),events:(new oe).get(e),id:t,mediaFiles:n,videoClicks:i}:null}}class ce extends re{get(e){const t=new de,i=t.get(e),n=t.getCompanion(e);return i?{adSystem:this.getValue(e,"AdSystem"),companion:n,creatives:i}:null}}var ue=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class he{}he.getVAST=(e,t)=>null==t?Promise.resolve(null):"adtool"===e.provider&&e.url?he.getAdtoolVAST(e.url):Promise.resolve(he.getTJVAST(null==t?void 0:t.full_html)),he.getTJVAST=e=>{if(!e)return null;const t=(new DOMParser).parseFromString(e,"application/xml").querySelectorAll("InLine")[0];return t?(new ce).get(t):null},he.getAdtoolVAST=e=>ue(void 0,void 0,void 0,(function*(){if(!e)return null;const t=yield F.makeXMLRequest(e);if(null==t)return null;const i=(new DOMParser).parseFromString(t,"application/xml").querySelectorAll("InLine")[0];return i?(new ce).get(i):null})),he.getOptions=(e,t)=>{const i=m.calculateHeightRatio,n=m.calculateWidthRatio;return Object.assign(Object.assign({},t),{canSkip:!0,imageDivisionAt:n(.75),initSkipAd:!1,initialAdPosition:e,playAdVideo:!1,reachedBanner:!1,skipAd:!0,skipButtonHeight:"36px",skipButtonWidth:"28%",smallBannerHeight:i(99),smallBannerWidth:n(.25)})},he.dispatchEvents=e=>{e&&e.forEach((e=>m.sendEvent(e)))},he.hideVolumeControl=e=>{const t=document.createElement("STYLE");t.innerHTML=`\n\t\t\tvideo#${e}::-webkit-media-controls-volume-slider {\n\t\t\t\tdisplay:none;\n\t\t\t}\n\t\t\t\n\t\t\tvideo#${e}::-webkit-media-controls-mute-button {\n\t\t\t\tdisplay:none;\n\t\t\t}\n\t\t`,document.head.appendChild(t)},he.triggerFullScreen=e=>{(e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen).call(e)},he.getNewPosition=(e,t)=>e>t?e-10<t?e-(t+e):e-10:e+10>t?e+(t-e):e+10,he.getExpandButton=()=>{const e=h.createDOMElement("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDQ2OS4zMzMgNDY5LjMzMyIgZmlsbD0iI0ZGRiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDY5LjMzMyA0NjkuMzMzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNjAsMEgxMC42NjdDNC43NzEsMCwwLDQuNzcxLDAsMTAuNjY3VjE2MGMwLDUuODk2LDQuNzcxLDEwLjY2NywxMC42NjcsMTAuNjY3SDMyYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42NjcKCQkJCVY0Mi42NjdIMTYwYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42NjdWMTAuNjY3QzE3MC42NjcsNC43NzEsMTY1Ljg5NiwwLDE2MCwweiIvPgoJCQk8cGF0aCBmaWxsPSIjRkZGIiBkPSJNNDU4LjY2NywwSDMwOS4zMzNjLTUuODk2LDAtMTAuNjY3LDQuNzcxLTEwLjY2NywxMC42NjdWMzJjMCw1Ljg5Niw0Ljc3MSwxMC42NjcsMTAuNjY3LDEwLjY2N2gxMTcuMzMzVjE2MAoJCQkJYzAsNS44OTYsNC43NzEsMTAuNjY3LDEwLjY2NywxMC42NjdoMjEuMzMzYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42NjdWMTAuNjY3QzQ2OS4zMzMsNC43NzEsNDY0LjU2MywwLDQ1OC42NjcsMHoiLz4KCQkJPHBhdGggZmlsbD0iI0ZGRiIgZD0iTTQ1OC42NjcsMjk4LjY2N2gtMjEuMzMzYy01Ljg5NiwwLTEwLjY2Nyw0Ljc3MS0xMC42NjcsMTAuNjY3djExNy4zMzNIMzA5LjMzM2MtNS44OTYsMC0xMC42NjcsNC43NzEtMTAuNjY3LDEwLjY2NwoJCQkJdjIxLjMzM2MwLDUuODk2LDQuNzcxLDEwLjY2NywxMC42NjcsMTAuNjY3aDE0OS4zMzNjNS44OTYsMCwxMC42NjctNC43NzEsMTAuNjY3LTEwLjY2N1YzMDkuMzMzCgkJCQlDNDY5LjMzMywzMDMuNDM3LDQ2NC41NjMsMjk4LjY2Nyw0NTguNjY3LDI5OC42Njd6Ii8+CgkJCTxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNjAsNDI2LjY2N0g0Mi42NjdWMzA5LjMzM2MwLTUuODk2LTQuNzcxLTEwLjY2Ny0xMC42NjctMTAuNjY3SDEwLjY2N0M0Ljc3MSwyOTguNjY3LDAsMzAzLjQzNywwLDMwOS4zMzN2MTQ5LjMzMwoJCQkJYzAsNS44OTYsNC43NzEsMTAuNjY3LDEwLjY2NywxMC42NjdIMTYwYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42Njd2LTIxLjMzMwoJCQkJQzE3MC42NjcsNDMxLjQzOCwxNjUuODk2LDQyNi42NjcsMTYwLDQyNi42Njd6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=",style:m.createInlineStyle({fill:"#FFFFFF"}),width:"100%"}),t=h.createDOMElement("div",{style:Z.expandButton});return t.appendChild(e),t};var pe,me=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class ve{}pe=ve,ve.getVAST=(e,t)=>null==t?Promise.resolve(null):"adtool"===e.provider&&e.url&&pe.isValidAdtool(e.url)?pe.getAdtoolVAST(e.url):Promise.resolve(pe.getTJVAST(null==t?void 0:t.full_html)),ve.isValidAdtool=e=>{const t=e.split("/")[2];return void 0!==t&&null!==t.match(/adtng.com/i)},ve.getTJVAST=e=>{if(!e)return null;const t=(new DOMParser).parseFromString(e,"application/xml").querySelectorAll("InLine")[0];return t?(new ce).get(t):null},ve.getAdtoolVAST=e=>me(void 0,void 0,void 0,(function*(){if(!e)return null;const t=yield F.makeXMLRequest(e);if(null==t)return null;const i=(new DOMParser).parseFromString(t,"application/xml").querySelectorAll("InLine")[0];return i?(new ce).get(i):null}));var ge=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class fe extends _{constructor(e,t,i){super(e,t,i),this.screenWidth=document.documentElement.clientWidth,this.skipButtonCountingStarted=!1,this.createAd=()=>ge(this,void 0,void 0,(function*(){try{if(te.get(v.videoDriveBy.cookieName))return null;const e=yield G.getJSONFromContent(this);if(!e||e.media_type!==K.PrerollVideo)return null;const t=yield ve.getVAST(this.vastProvider,e);return t?(this.vast=t,this.initAdParameters(e),setTimeout((()=>this.initBindings()),1e3),this.buildAd()):null}catch(e){return null}})),this.create=()=>ge(this,void 0,void 0,(function*(){return new Promise((e=>{const t=()=>{window.removeEventListener("scroll",t),this.createAd().then((t=>{e(t)}))};window.addEventListener("scroll",t)}))})),this.closeAd=e=>{var t;this.slide(this.elements.adContainer,!1),this.elements.videoEl.pause(),he.dispatchEvents(null===(t=this.vast.creatives[0].events)||void 0===t?void 0:t[e?"skip":"complete"]),this.setCookie()},this.setCookie=()=>{te.set(v.videoDriveBy.cookieName,"1",{expires:this.options.cookieExpiry/864e5})},this.initAdParameters=e=>{this.options=he.getOptions(this.screenWidth,v.videoDriveBy),this.overrideAttributes(),this.request.data=Object.assign(Object.assign({},this.request.data),{ad_id:e.ad_id,campaign_id:e.campaign_id,media_type:e.media_type,member_id:e.member_id})},this.initBindings=()=>{const{videoEl:e,expandButton:t}=this.elements;window.addEventListener("resize",this.handleResize),this.addVideoEvents(e),t.addEventListener("click",(()=>he.triggerFullScreen(this.elements.videoEl))),this.handleScroll(),window.addEventListener("scroll",(()=>this.handleScroll())),window.addEventListener("touchemove",(()=>this.handleScroll()))},this.addVideoEvents=e=>{new ee(e).registerFirstQuartile((()=>{var e;he.dispatchEvents(null===(e=this.vast.creatives[0].events)||void 0===e?void 0:e.firstQuartile)})).registerMidpoint((()=>{var e;he.dispatchEvents(null===(e=this.vast.creatives[0].events)||void 0===e?void 0:e.midpoint)})).registerThirdQuartile((()=>{var e;he.dispatchEvents(null===(e=this.vast.creatives[0].events)||void 0===e?void 0:e.thirdQuartile)})).startListening(),e.addEventListener("ended",(()=>this.closeAd(!1)))},this.handleResize=()=>{this.justResized=!0;let e=document.documentElement.clientWidth;this.isVisible&&(e-=this.elements.adContainer.clientWidth),this.elements.adContainer.style.left=`${e}px`,setTimeout((()=>{this.justResized=!1}),200)},this.slide=(e,t)=>{this.options.reachedBanner=!0;let i=e.offsetLeft;window.requestAnimationFrame=ne;const n=t?document.documentElement.clientWidth-e.clientWidth:document.documentElement.clientWidth+e.clientWidth,r=()=>{const s=e.offsetLeft;if(t?s<=n:s>=n)this.isVisible=t,e.style.left=`${n}px`,this.options.playAdVideo||(this.options.playAdVideo=!0,this.setCookie());else{const n=t?e.offsetLeft-e.clientWidth:e.offsetLeft+e.clientWidth;i=he.getNewPosition(i,n),e.style.left=`${i}px`,ne(r)}};ne(r),this.startSkipButtonCounting()},this.handleScroll=()=>{if(this.justResized)return;m.getWindowYPosition()>5&&!this.options.reachedBanner&&this.slide(this.elements.adContainer,!0)},this.getSkipButtonContainer=e=>{const{skipButtonHeight:t,skipButtonWidth:i}=this.options,n=h.createDOMElement("div",{style:Z.skipButton(t,i)}),r=h.createDOMElement("span",{style:"display: inline-block;vertical-align: middle;height: 100%;"});return n.appendChild(r),n.appendChild(e),n},this.getSkipButton=()=>h.createDOMElement("span"),this.startSkipButtonCounting=()=>{if(this.elements.skipButton&&!this.skipButtonCountingStarted&&this.options.canSkip&&this.options.skipDelay>0){let e=Math.round(this.options.skipDelay/1e3);const t=setInterval((()=>{this.elements.skipButton?(this.elements.skipButton.innerHTML=`⨉ Skip Ad in ${--e}s`,e<1&&(this.elements.skipButton.innerHTML="⨉ Skip Ad",this.elements.skipButton.addEventListener("click",(()=>this.closeAd(!0))),this.elements.skipButton.style.cursor="pointer",clearInterval(t))):clearInterval(t)}),1e3)}},this.getVideoContainer=()=>{const e="vdb-player",t=h.createDOMElement("a",{href:this.vast.creatives[0].videoClicks.clickThrough,style:Z.wrapper,target:"_blank"});t.onclick=()=>{var e;return he.dispatchEvents(null===(e=this.vast.creatives[0].events)||void 0===e?void 0:e.click)};const i=h.createDOMElement("video",Object.assign({style:Z.video},{autoplay:!0,disableRemotePlayback:!0,muted:!0,playsInline:!0}));i.id=e,i.onplaying=()=>{var e;return he.dispatchEvents(null===(e=this.vast.creatives[0].events)||void 0===e?void 0:e.start)},i.onfullscreenchange=()=>{var e;document.fullscreenElement&&he.dispatchEvents(null===(e=this.vast.creatives[0].events)||void 0===e?void 0:e.fullscreen)},he.hideVolumeControl(e);const n=this.vast.creatives[0].mediaFiles;for(const e in n){const t=n[e];i.appendChild(h.createDOMElement("source",{src:t.url,type:t.type}))}return new X(i,this.vast.creatives[0].mediaFiles),i.load(),i.muted=!0,t.appendChild(i),t},this.getAdBanner=()=>{var e,t;const i=h.createDOMElement("div",{style:Z.adBanner}),{smallBannerHeight:n,smallBannerWidth:r}=this.options,s=null===(e=this.vast.companion)||void 0===e?void 0:e.staticResource;if(!s)return null;const o=h.createDOMElement("img",{style:Z.adBannerImg(s,n,r)}),a=h.createDOMElement("a",{href:null===(t=this.vast.companion)||void 0===t?void 0:t.clickThrough,target:"_blank"});return a.appendChild(o),i.appendChild(a),i},this.buildAd=()=>{const e=h.createDOMElement("div",{style:Z.adContainer(++this.screenWidth,this.options.position)}),t=this.getVideoContainer(),i=t.firstChild;e.appendChild(t);const n=this.getAdBanner();let r;if(n&&e.appendChild(n),this.options.canSkip){r=this.getSkipButton();const t=this.getSkipButtonContainer(r);e.appendChild(t)}const s=he.getExpandButton();return e.appendChild(s),this.elements={adContainer:e,expandButton:s,skipButton:r,videoEl:i},e},this.specificAttrs=t,this.vastProvider={provider:"adtool"===this.specificAttrs.vast_provider?"adtool":"tj",url:this.specificAttrs.vast_url}}overrideAttributes(){if(this.options.canSkip="false"!==this.specificAttrs.can_skip,this.specificAttrs.position&&(this.options.position=this.specificAttrs.position),this.specificAttrs.cookie_expiry){const e=Number(this.specificAttrs.cookie_expiry);isNaN(e)||(this.options.cookieExpiry=e)}const e=Number(this.specificAttrs.skip_delay);isNaN(e)||(this.options.skipDelay=e)}}class be{}be.shouldShowLabel=e=>{var t,i,n,r,s,o,a,l;if(!1===e.params.inbanlabel)return!1;if(!0===e.params.inbanlabel||!v.inBanLabels.filter||!(null===(t=v.inBanLabels.filter)||void 0===t?void 0:t.websites)||!(null===(i=e.channelParams)||void 0===i?void 0:i.site))return!0;const d=null===(n=e.channelParams)||void 0===n?void 0:n.site;if(!(null===(r=v.inBanLabels.filter)||void 0===r?void 0:r.websites.find((e=>e===d))))return!0;let c=!1;return(null===(s=v.inBanLabels.filter)||void 0===s?void 0:s.availableWebsites)&&(c=Boolean(null===(o=v.inBanLabels.filter)||void 0===o?void 0:o.availableWebsites.find((e=>e===d)))),(null===(a=v.inBanLabels.filter)||void 0===a?void 0:a.zoneIds)&&(c=c||Boolean(null===(l=v.inBanLabels.filter)||void 0===l?void 0:l.zoneIds.find((t=>t===e.params.spotId)))),c},be.getTargetUrl=e=>{var t,i,n;const r=null===(t=e.channelParams)||void 0===t?void 0:t.site;return r&&null!==(n=null===(i=v.inBanLabels.targetUrls)||void 0===i?void 0:i[r])&&void 0!==n?n:v.inBanLabels.defaultTargetUrl},be.wrapWithInBanLabel=(e,t)=>{var i;if(!e||!be.shouldShowLabel(t))return e;const n=h.createDOMElement("div",{style:m.createInlineStyle(O)});n.innerText="Ads by TrafficJunky",n.className="tj-inban-tooltip";const r=h.createDOMElement("div",{style:m.createInlineStyle(I)});r.appendChild(n),r.className="tj-inban-icon";const s=h.createDOMElement("style");s.innerHTML="\n\t\t\t.tj-inban-tooltip {\n\t\t\t\tleft: 15px;\n\t\t\t}\n\t\t\t\n\t\t\t.tj-inban-icon:hover .tj-inban-tooltip {\n\t\t\t\tleft: -99px;\n\t\t\t}\n\t\t";const o=h.createDOMElement("a",{href:be.getTargetUrl(t),target:"_blank"});o.appendChild(r);const a=h.createDOMElement("div",{style:m.createInlineStyle(D)});return a.appendChild(o),a.appendChild(s),e.setAttribute("srcdoc",`${null===(i=e.getAttribute("srcdoc"))||void 0===i?void 0:i.split("</body>")[0]}${a.outerHTML}</body></html>`),e};class we{constructor(e,t){this.create=e=>be.wrapWithInBanLabel(G.createSync(this.baseAd,e,this.json),this.baseAd),this.baseAd=e,this.json=t}}class ye extends we{constructor(){super(...arguments),this.create=()=>{try{const e=this.stringToVAST();if(!e)return null;this.vast=e,this.baseAd.request.data=this.json;const t=this.createVideo(),i=this.createOverlay(),n=this.createWrapper(t,i);return new X(t,this.vast.creatives[0].mediaFiles),be.wrapWithInBanLabel(G.wrap(this.baseAd,n),this.baseAd)}catch(e){return null}},this.getEventScript=(e,t)=>{if(!t)return null;const i=h.createDOMElement("script");return i.innerHTML=`document.getElementById('${e}').onclick = function() { \n\t\t\t\t\t\t\t\tvar xhr = new XMLHttpRequest(); \n\t\t\t\t\t\t\t\txhr.open('GET', '${t}'); \n\t\t\t\t\t\t\t\txhr.send(); \n\t\t\t\t\t\t    };`,i}}createWrapper(e,t){const{width:i,height:n}=this.baseAd.params,r=m.createInlineStyle(Object.assign(Object.assign({},k),{height:n,width:i})),s=h.createDOMElement("div",{style:r});return s.appendChild(e),t&&s.appendChild(t),s}createOverlay(){if(!this.vast.companion)return null;const{staticResource:e,clickThrough:t,clickTracking:i}=this.vast.companion,n=h.createDOMElement("img",{src:e,style:m.createInlineStyle(T)});if(!t)return n;const r=h.createDOMElement("a",{href:t,id:"overlay",target:"_blank"}),s=this.getEventScript("overlay",i);return r.appendChild(n),s&&r.appendChild(s),r}createVideo(){const e=h.createDOMElement("video",{autoplay:!0,disableRemotePlayback:!0,loop:!0,muted:"muted",playsinline:"",preload:"auto",style:"width: 100%"});e.muted=!0,e.volume=0;const{clickThrough:t,clickTracking:i}=this.vast.creatives[0].videoClicks,n=h.createDOMElement("a",{href:t,id:"video",target:"_blank"}),r=this.getEventScript("video",i[0]);return n.appendChild(e),r&&n.appendChild(r),n}stringToVAST(){const e=(new DOMParser).parseFromString(this.json.full_html,"application/xml").querySelectorAll("InLine")[0];return e?(new ce).get(e):null}}class Ae{constructor(){this.create=(e,t)=>t.media_type===K.VideoBanner?new ye(e,t):new we(e,t)}}var Ce=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class xe extends _{constructor(){super(...arguments),this.create=()=>Ce(this,void 0,void 0,(function*(){return yield this.createWithDefaultIfFail(this.getIframeAd)})),this.getIframeAd=(e,t)=>Ce(this,void 0,void 0,(function*(){const i=e||(yield G.getJSONFromContent(this));if(!i)return null;const n=(new Ae).create(this,i);return n?n.create(t):null}))}}var Ee=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Se extends xe{constructor(){super(...arguments),this.style=Object.assign(Object.assign({},b),{"min-height":`${this.params.height}`}),this.create=()=>Ee(this,void 0,void 0,(function*(){const e=yield G.getJSONFromContent(this);if((null==e?void 0:e.media_type)===K.VideoBanner)return this.createWithDefaultIfFail((()=>this.getIframeAd(e)));const t=yield this.createWithDefaultIfFail((()=>Ee(this,void 0,void 0,(function*(){const t=yield G.create(this,this.style,e);return be.wrapWithInBanLabel(t,this)}))),this.style);return t?this.createResponsiveWrapper(t):null})),this.createResponsiveWrapper=e=>{const t=Number(this.params.width.slice(0,-2)),i=Number(this.params.height.slice(0,-2)),n=Math.floor(i/t*100),r=m.createInlineStyle(Object.assign(Object.assign({},w),{"padding-top":`${n}%`}),!0),s=h.createDOMElement("div",{style:r});return s.appendChild(e),s}}}var je=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Ne extends _{constructor(){super(...arguments),this.createBottomAdElement=()=>je(this,void 0,void 0,(function*(){const e=yield this.createWithDefaultIfFail((()=>G.create(this,void 0,void 0,!1)));if(!e)return null;const t=this.createContainer(),i=m.createInlineStyle({height:`${this.params.height}`,width:`${this.params.width}`}),n=h.createDOMElement("div",{style:i});return n.appendChild(this.createCloseButton(t)),n.appendChild(e),t.appendChild(n),t})),this.createCloseButton=e=>{const t=h.createDOMElement("div");return t.setAttribute("style",m.createInlineStyle(M)),t.onclick=()=>{document.body.removeChild(e),B.close()},t},this.createContainer=()=>{const e=v.bottomAdName,t=h.createDOMElement("div",{id:e});return t.setAttribute("style",m.createInlineStyle(N)),t}}create(){return je(this,void 0,void 0,(function*(){return window.tjBottomAdLoaded=!0,yield this.createBottomAdElement()}))}insertIntoDOM(e){document.body.appendChild(e)}checkIfCreatable(){return!B.wasClosed()&&!window.tjBottomAdLoaded&&super.checkIfCreatable()}revert(){delete window.tjBottomAdLoaded}}var Me=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class ke extends xe{constructor(){super(...arguments),this.create=()=>Me(this,void 0,void 0,(function*(){const e=yield G.getJSONFromContent(this);return e?(this.jsonContent=e,yield this.createWithDefaultIfFail(this.createParallaxAd)):null})),this.createParallaxAd=()=>Me(this,void 0,void 0,(function*(){const e=yield this.createContainer(),t=m.createInlineStyle({height:`${this.params.height}`,width:`${this.params.width}`}),i=h.createDOMElement("div",{style:t});return e.appendChild(i),e})),this.createContainer=()=>Me(this,void 0,void 0,(function*(){var e,t;const i=h.createDOMElement("div"),n=h.createDOMElement("span",{style:m.createInlineStyle(A)});n.innerText="Ad by TrafficJunky";const r=h.createDOMElement("a",{href:"https://trafficjunky.com",style:"display: block",target:"_blank"});r.appendChild(n),i.setAttribute("style",m.createInlineStyle(Object.assign(Object.assign({},y),{height:null!==(e=this.params.windowHeight)&&void 0!==e?e:"300px",width:null!==(t=this.params.windowWidth)&&void 0!==t?t:"300px"}))),i.insertAdjacentElement("afterbegin",r);const s=yield this.createContent();return i.insertAdjacentElement("beforeend",s),i})),this.createContent=()=>Me(this,void 0,void 0,(function*(){const e=m.getBrowserInfo(),t=h.createDOMElement("div",{style:m.createInlineStyle(j(e))}),i=h.createDOMElement("div",{style:m.createInlineStyle(E(e))}),n=h.createDOMElement("div",{style:m.createInlineStyle(C)}),r=yield this.getIframeAd(this.jsonContent);return r&&(n.insertAdjacentElement("beforeend",r),i.insertAdjacentElement("afterbegin",n),t.insertAdjacentElement("afterbegin",i)),t.className="parallax-content",t}))}}Error;class Te{constructor(){const e=document.createElement("style");this.element=e}insertRule(e){this.element.innerHTML+=e}}var De=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Ie extends Error{}class Oe extends _{constructor(e,t,i){super(e,t,i),this.style=Object.assign(Object.assign({},b),{"min-height":`${this.params.height}`}),this.getParams=(e,t)=>{var i,n,r,s,o,a,l,d,c,u,h;const p=String(e.type),m=this.findTheme(null!==(i=null==t?void 0:t.site)&&void 0!==i?i:null);if("native"!==p)throw new Error;return Object.assign(Object.assign({},super.getParams(e)),{adBadgeBackground:null!==(n=e.ad_badge_background)&&void 0!==n?n:m.adBadgeBackground,adBadgeColor:null!==(r=e.ad_badge_color)&&void 0!==r?r:m.adBadgeColor,adBadgeFont:null!==(s=e.ad_badge_font)&&void 0!==s?s:m.adBadgeFont,brandNameColor:null!==(o=e.brand_name_color)&&void 0!==o?o:m.brandNameColor,brandNameHoverColor:null!==(a=e.brand_name_hover_color)&&void 0!==a?a:m.brandNameHoverColor,brandNameFont:null!==(l=e.brand_name_font)&&void 0!==l?l:m.brandNameFont,inbanlabel:Boolean(e.inbanlabel)||!(null===(d=null==t?void 0:t.hide_in_ban_labels_for)||void 0===d?void 0:d.split(",").includes("native")),titleColor:null!==(c=e.title_color)&&void 0!==c?c:m.titleColor,titleHoverColor:null!==(u=e.title_hover_color)&&void 0!==u?u:m.titleHoverColor,titleFont:null!==(h=e.title_font)&&void 0!==h?h:m.titleFont,type:p})},this.create=()=>De(this,void 0,void 0,(function*(){try{const t=yield G.getJSONFromContent(this);if(!t||(e=t).media_type!==K.Native&&e.media_type!==K.Image)return null;this.jsonContent=this.parseNativeAdJson(t)}catch(e){return null}var e;return yield this.createWithDefaultIfFail(this.createNativeAd)})),this.parseNativeAdJson=e=>{try{const t=JSON.parse(e.full_html);if(!function(e){const t=Object.keys(e);return t.includes("title")&&t.includes("brandName")&&t.includes("url")&&t.includes("creative_url")&&t.includes("tracking_image_url")}(t))throw new Ie("Native Ad content does not match interface");return Object.assign(Object.assign({},e),t)}catch(e){throw new Ie("Native Ad content is not valid JSON")}},this.createNativeAd=()=>De(this,void 0,void 0,(function*(){var e;const t=parseInt(this.params.height,10)/parseInt(this.params.width,10)*100,i=m.createInlineStyle({"max-width":this.params.width,"padding-bottom":`${t}%`,position:"relative"}),n=h.createDOMElement("div",{style:i}),r=this.createIframe(),s=m.createInlineStyle({position:"relative"}),o=h.createDOMElement("div",{style:s}),a=this.createCreativeImage(),l=this.createTrackingImage(),d=this.createTitleContainer(),c=this.createBrandNameContainer();return o.appendChild(l),o.appendChild(a),o.appendChild(d),o.appendChild(c),r.srcdoc=`\n        <html>\n            <head>\n                ${null===(e=this.stylesheet)||void 0===e?void 0:e.element.outerHTML}\n            </head>\n            <body>\n                ${o.outerHTML}\n            </body>\n        </html>\n        `,n.appendChild(r),n})),this.createCreativeImage=()=>{const e=m.createInlineStyle({width:"100%"}),t=this.createImage(this.jsonContent.creative_url,e),i=this.createLink(this.jsonContent.url);return i.appendChild(t),i},this.createTrackingImage=()=>{const e=m.createInlineStyle({position:"absolute",visibility:"hidden","z-index":"-1000"}),t=h.createDOMElement("div",{style:e}),i=this.createImage(this.jsonContent.tracking_image_url);return t.appendChild(i),t},this.createImage=(e,t="")=>{const i=h.createDOMElement("img",{style:t});return i.src=e,i},this.createTitleContainer=()=>{var e,t,i;this.stylesheet.insertRule(`\n            .title {\n                color: ${null!==(e=this.params.titleColor)&&void 0!==e?e:""};\n                font: ${null!==(t=this.params.titleFont)&&void 0!==t?t:""};\n                margin: 0.2em 0 0.6rem;\n            }\n            \n            .title:hover {\n                color: ${null!==(i=this.params.titleHoverColor)&&void 0!==i?i:""};\n            }\n        `);const n=h.createDOMElement("h3",{class:"title"}),r=this.createLink(this.jsonContent.url);return r.innerText=this.truncateText(this.jsonContent.title,87),r.title=this.jsonContent.title,n.appendChild(r),n},this.createBrandNameContainer=()=>{var e,t,i,n,r,s;const o=m.createInlineStyle({"align-items":"center",display:"flex"}),a=h.createDOMElement("div",{style:o});this.stylesheet.insertRule(`\n            .brand {\n                color: ${null!==(e=this.params.brandNameColor)&&void 0!==e?e:""};\n                font: ${null!==(t=this.params.brandNameFont)&&void 0!==t?t:""};\n            }\n            \n            .brand:hover {\n                color: ${null!==(i=this.params.brandNameHoverColor)&&void 0!==i?i:""};\n            }\n        `);const l=h.createDOMElement("span",{class:"brand"}),d=this.createLink(this.jsonContent.url);d.appendChild(l),d.title=this.jsonContent.brandName;const c=m.createInlineStyle({background:null!==(n=this.params.adBadgeBackground)&&void 0!==n?n:"","border-radius":"2px",color:null!==(r=this.params.adBadgeColor)&&void 0!==r?r:"",font:null!==(s=this.params.adBadgeFont)&&void 0!==s?s:"",margin:"0 0.5em 0 0",padding:"0.2em 0.2em"}),u=h.createDOMElement("span",{style:c});u.innerText="Ad",l.innerText=this.truncateText(this.jsonContent.brandName,25);const p=this.createLink(be.getTargetUrl(this));return p.appendChild(u),a.appendChild(p),a.appendChild(d),a},this.createLink=e=>{const t=m.createInlineStyle({color:"inherit","text-decoration":"none"}),i=h.createDOMElement("a",{style:t});return i.href=e,i.target="_blank",i},this.createIframe=()=>{const e=G.createIframe(this,{border:"none",height:"100%","max-height":this.params.height,left:"0",position:"absolute",top:"0",width:"100%"});return G.attachViewabilityListener(e,this.jsonContent,this),e},this.findTheme=e=>{const t=Object.freeze({adBadgeBackground:"#368cf3",adBadgeColor:"#FFFFFF",adBadgeFont:"bold 12px sans-serif",brandNameColor:"#a8aeb6",brandNameFont:"14px sans-serif",brandNameHoverColor:"#bfc5d1",titleColor:"#bfc5d1",titleFont:"15px sans-serif",titleHoverColor:"#a8aeb6"});switch(e){case"pornhub":return Object.assign(Object.assign({},t),{adBadgeBackground:"#ff9000",adBadgeColor:"#000000",brandNameHoverColor:"#ff9000",titleHoverColor:"#ff9000"});default:return t}},this.params=this.getParams(t,i),this.stylesheet=new Te}truncateText(e,t){return e.length>t?`${e.slice(0,t)}...`:e}}class Pe{constructor(){this.create=(e,t,i)=>"bottom"===t.type?new Ne(e,t,i):"native"===t.type?new Oe(e,t,i):this.isResponsive(t,i)?new Se(e,t,i):"video-drive-by"===t.type?new fe(e,t,i):"scrollable"===t.type?new ke(e,t,i):new xe(e,t,i),this.isResponsive=(e,t)=>{if("responsive"!==e.type)return!1;const i=e.info||(null==t?void 0:t.info);if(!i)return!0;let n=!0;try{n="partner"!==JSON.parse(i).content_type}catch(e){}return n}}}var Le=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class _e{constructor(){this.sync=e=>Le(this,void 0,void 0,(function*(){if(this.verify(e)&&!window.tjIdSyncSynced){window.tjIdSyncSynced=!0;try{const e=yield this.get();if(!e)return;e.set_TJ_uid().fp_get().sync()}catch(e){}}})),this.get=()=>Le(this,void 0,void 0,(function*(){return new Promise((e=>{if(window.idsync)return e(window.idsync);const t=document.createElement("script");t.defer=!0,t.src=`${v.idSync.scriptUrl}?v=${this.getCacheVersion()}`,t.onload=t.onerror=()=>e(window.idsync),document.body.insertAdjacentElement("beforeend",t)}))})),this.getCacheVersion=()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()},this.verify=e=>{if(!e)return!1;const t=e.site,i="publisher"===e.invocation_type;return!(-1===v.idSync.sites.indexOf(t)&&!i)&&-1===window.navigator.userAgent.indexOf("MSIE")}}}var Be=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Fe{constructor(){this.idSyncService=new _e,this.preload=()=>{if(!window.tjPreloadAds)return;const e=g.getAdContextAttributes();for(const t in window.tjPreloadAds)"response"in window.tjPreloadAds[t]&&(window.tjPreloadAds[t].loaded||(window.tjPreloadAds[t].loaded=!0,new Promise((()=>Be(this,void 0,void 0,(function*(){const i=yield m.getElementBySpotId(v.adClassName,t);i&&this.run(i,e)}))))))},this.load=()=>{const e=document.getElementsByClassName(v.adClassName),t=g.getAdContextAttributes(),i=[];this.idSyncService.sync(t);for(let n=0;n<e.length;n++){const r=this.run(e[n],t);r&&i.push(r)}return Promise.all(i)},this.reload=e=>{const t=Fe.ads[e];if(t)for(let e=0;e<t.length;e++)t[e].reload()},this.run=(e,t)=>{const i=h.getDataAttributes(e);if(!this.canCreate(i))return null;e.setAttribute("data-loading","true");const n=(new Pe).create(e,i,t);return Fe.ads[n.params.spotId]||(Fe.ads[n.params.spotId]=[]),Fe.ads[n.params.spotId].push(n),n.run()},this.verifyAttributes=e=>!(!this.verify(e,["source_id"])&&!this.verify(e,["spot_id"]))&&("video-drive-by"===e.type||this.verify(e,["height","width"])),this.verify=(e,t)=>{let i=!0;for(let n=0;n<t.length;n++)e[t[n]]||(i=!1);return i},this.setDeliveryServer=()=>{const e=g.getAdContextAttributes();B.setDeliveryServer(null==e?void 0:e.delivery_server)}}init(){window.tjLoadEmbeddedAds=this.load,window.tjPreloadEmbeddedAds=this.preload,window.tjReloadEmbeddedAdsSpot=this.reload,window.tjDebug=u.debug,this.setDeliveryServer()}canCreate(e){if(e.loading)return!1;if(!this.verifyAttributes(e))return!1;const t=e.spot_id;return!(window.tjPreloadAds&&window.tjPreloadAds[t]&&!window.tjPreloadAds[t].loaded)}}function Re(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e){for(let t=0;t<this.length;t++)if(this[t]===e)return!0;return!1}}),window.Map||Object.defineProperty(window,"Map",{value:function(){const e={};this.has=function(t){return void 0!==e[t]},this.get=function(t){return e[t]},this.set=function(t,i){e[t]=i},this.delete=function(t){delete e[t]}}})}Fe.ads={};class ze{constructor(){this.embeddedAdsService=new Fe}init(){if(window.tjEmbeddedAdsLoaded)return!1;Re();try{window.tjEmbeddedAdsLoaded=!0,this.sendLoadedEvent(),this.launch()}catch(e){return m.dispatchError(e),!1}return!0}launch(){this.embeddedAdsService.init(),this.embeddedAdsService.preload(),"loading"!==document.readyState?this.embeddedAdsService.load():document.addEventListener("DOMContentLoaded",(()=>{try{this.embeddedAdsService.load()}catch(e){m.dispatchError(e)}}))}sendLoadedEvent(){let t={};if(void 0!==window.tjEmbeddedAdsDuration){const e=void 0!==window.tjPreloadAds?Object.assign({},window.tjPreloadAds):null;t={duration:Date.now()-window.tjEmbeddedAdsDuration,tjPreloadAds:e}}h.dispatchTjEvent(e.embeddedAdsLoaded,t)}}(new ze).init()}(),n}()}));